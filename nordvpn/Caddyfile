# Meshnet reverse proxy — TLS termination for inbound meshnet traffic
# Self-signed TLS by default (meshnet peers trust manually).
# To use Let's Encrypt, replace :443 with your domain name.

:443 {
	tls internal

	# Uptime Kuma dashboard (strip /kuma prefix — Kuma doesn't support sub-paths)
	handle_path /kuma/* {
		reverse_proxy uptime-kuma:3001
	}

	# Dozzle log viewer (preserve path — Dozzle has DOZZLE_BASE=/logs)
	handle /logs/* {
		reverse_proxy dozzle:{$DOZZLE_PORT:5005}
	}

	# Gateway API (default route)
	handle /* {
		reverse_proxy openclaw-gateway:{$GATEWAY_PORT:18789}
	}
}
